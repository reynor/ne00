{% extends "layout.html" %} {% block pageHeader %}
<h1>
  主页
  <small>Optional description</small>
</h1>
<ol class="breadcrumb">
  <li>
    <a href="#">
      <i class="fa fa-dashboard"></i> Level</a>
  </li>
  <li class="active">Here</li>
</ol>
{% endblock %} {% block content %}
<form id="form1" role="form" action="{#% url 'search-submit' %#}" method="post">
  {% csrf_token %}
  <input name="search2" id="search2" type="search" placeholder="Search" />
  <button type="button" id='sum2'>Submit</button>
</form>
<a href="{% url 'getdata' %}">快来点啊</a>
<!--**************************************************************-->
<p>请输入两个数字</p>

<form action="/polls/add/" method="get">
  a:
  <input type="text" name="a" id='a'>
  <br> b:
  <input type="text" name="b" id='b'>
  <br>

  <p>result:
    <span id='result'></span>
  </p>

  <!--input type="submit" value="提交"-->
  <button type="button" id='sum'>提交</button>
</form>

<!--**********************************************************-->
<div class="box">
  <div class="box-header">
    <h3 class="box-title">产品列表</h3>
  </div>
  <!-- /.box-header -->
  <div class="box-body">
    <table id="example1" class="table table-bordered table-striped dispalay" style="white-space: nowrap; ">
      <thead>
        <tr>
          <th>产品编号</th>
          <th>产品名称</th>
          <th>型号</th>
          <th>品牌</th>
          <th>修改时间</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
      <tfoot>
        <tr>
          <th>Rendering engine</th>
          <th>Browser</th>
          <th>Platform(s)</th>
          <th>Engine version</th>
          <th>CSS grade</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <!-- /.box-body -->
</div>
{% endblock %} {% block scripts %}
<!-- DataTables -->
<link rel="stylesheet" href="static/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" href="static/bower_components/datatables.net-bs/css/jquery.dataTables.css">

<!-- <link rel="stylesheet" href="static/bower_components/datatables.net-bs/css/buttons.dataTables.min.css">
<link rel="stylesheet" href="static/bower_components/datatables.net-bs/css/buttons.bootstrap.min.css"> -->
<!-- DataTables -->
<script src="static/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="static/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="static/bower_components/datatables.net/js/dataTables.select.min.js"></script>

<!-- <script src="static/bower_components/datatables.net/js/buttons.bootstrap.min.js"></script>
<script src="static/bower_components/datatables.net/js/buttons.colVis.min.js"></script>
<script src="static/bower_components/datatables.net/js/buttons.flash.min.js"></script>
<script src="static/bower_components/datatables.net/js/buttons.html5.min.js"></script>
<script src="static/bower_components/datatables.net/js/buttons.print.min.js"></script> -->
<!-- SlimScroll -->
<script src="static/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="static/bower_components/fastclick/lib/fastclick.js"></script>

<script type="text/javascript" charset="utf8" src="style/DataTables-1.10.15/extensions/Buttons/js/dataTables.buttons.min.js"></script>

{% comment %} <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script> {% endcomment %}

<script>  
  $(document).ready(function () {

    //实时内容搜索
    $("#search2").on('input', function () {
      var a = $("#search2").val()
      $.ajax({
        //type: "GET",
        type: "POST",
        url: "{% url 'getdata' %}",
        data: {
          'a': a,
        },
        success: function (ret) {
          $('#result').html(ret)
          //$('#search').html("ret")
        },
      })
    })
    /*测试项，工作正常
    $(document).ready(function () {
      $("#sum").click(function () {
          var a = $("#a").val()
          var b = $("#b").val()
          
          $.ajax({
              type: "POST",
              url: "{% url 'getdata' %}",
              data: {
                  'a': a,
                  'b': b,
              },
              success: function (ret) {
                  $('#result').html(ret)
              }
          })
      })
  })*/

  
    $('#example1').DataTable({
      "sScrollX": "100%",
      "sScrollXInner": "100%",
      "bScrollCollapse": true,
      "autoWidth": true,
      select: true,
      buttons: [
                    'copy', 'excel', 'pdf'
                ],
      "autoWidth": true,
      "ajax": "{% url 'getdata' %}",
      columns: [
                  { "data": "productId" },
                  { "data": "productName" },
                  { "data": "specification" },
                  { "data": "productBrand" },
                  { "data": "modified" }
                ],
      "bInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
      "language": {
        "infoEmpty": "没有记录可以显示",
        "info": "共_TOTAL_条记录",
        "sZeroRecords": "没有匹配结果",
        "loadingRecords": "数据正在加载中......",
        "processing": "正在处理中......",
        "search": "搜索:",
        "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
        "oPaginate": {
          "sFirst": "首页",
          "sPrevious": "上页",
          "sNext": "下页",
          "sLast": "末页"
        },
        "sEmptyTable": "未找到相关数据",
      },
    })
  })
</script> {% endblock %}